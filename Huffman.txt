import heapq

def huffman(text):
    freq = {}
    for ch in text:
        freq[ch] = freq.get(ch, 0) + 1

    heap = [[freq[ch], [ch]] for ch in freq]
    heapq.heapify(heap)

    codes = {ch: "" for ch in freq}

    while len(heap) > 1:
        f1, chars1 = heapq.heappop(heap)
        f2, chars2 = heapq.heappop(heap)

        for ch in chars1:
            codes[ch] = '0' + codes[ch]
        for ch in chars2:
            codes[ch] = '1' + codes[ch]

        heapq.heappush(heap, [f1 + f2, chars1 + chars2])

    return codes


text = input("Enter text: ")
codes = huffman(text)

while True:
    print("\nMENU")
    print("1. Show Huffman Codes")
    print("2. Encode Text")
    print("3. Decode Text")
    print("4. Exit")

    choice = int(input("Enter choice: "))

    if choice == 1:
        print("\nCharacter | Code")
        for ch in sorted(codes):
            print(f"   {ch}     |  {codes[ch]}")

    elif choice == 2:
        encoded = ""
        for ch in text:
            encoded += codes[ch]
        print("\nEncoded Text:", encoded)

    elif choice == 3:
        # encoded = input("Enter encoded bit string: ")
        dec = ""
        temp = ""
        for bit in encoded:
            temp += bit
            for ch in codes:
                if codes[ch] == temp:
                    dec += ch
                    temp = ""
                    break
        print("Decoded Text:", dec)

    elif choice == 4:
        print("Exiting...")
        break

    else:
        print("Invalid choice! Try again.")
